(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{1132:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(5155),a=r(2115),l=r(5695),i=r(3571),o=r(285),n=r(9409),d=r(4073),c=r(9434);let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsxs)(d.bL,{ref:s,className:(0,c.cn)("relative flex w-full touch-none select-none items-center",r),...a,children:[(0,t.jsx)(d.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(d.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(d.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});m.displayName=d.bL.displayName;var p=r(6695),u=r(3662),f=r(6950),x=r(8390),h=r(5074),g=r(9137);function j(e){let{locations:s,propertyTypes:r,onSearch:l}=e,{t:i}=(0,g.B)(),[d,c]=(0,a.useState)("all"),[j,y]=(0,a.useState)("all"),[N,v]=(0,a.useState)([0,5e6]);return(0,t.jsx)(p.Zp,{className:"max-w-4xl mx-auto shadow-lg",children:(0,t.jsx)(p.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-4 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"md:col-span-2 lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"location-select",className:"sr-only",children:i("search.location")}),(0,t.jsxs)(n.l6,{value:d,onValueChange:c,children:[(0,t.jsx)(n.bq,{id:"location-select",className:"w-full",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.yv,{placeholder:i("search.location")})]})}),(0,t.jsxs)(n.gC,{children:[(0,t.jsx)(n.eb,{value:"all",children:i("search.allLocations")}),s.map(e=>(0,t.jsx)(n.eb,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"type-select",className:"sr-only",children:i("search.propertyType")}),(0,t.jsxs)(n.l6,{value:j,onValueChange:y,children:[(0,t.jsx)(n.bq,{id:"type-select",className:"w-full",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(n.yv,{placeholder:i("search.propertyType")})]})}),(0,t.jsxs)(n.gC,{children:[(0,t.jsx)(n.eb,{value:"all",children:i("search.allTypes")}),r.map(e=>(0,t.jsx)(n.eb,{value:e,children:i("property.types.".concat(e))},e))]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),i("search.priceRange")]}),(0,t.jsxs)("span",{className:"font-medium text-primary",children:["$",N[0].toLocaleString()," -"," ",5e6===N[1]?"".concat(5e6.toLocaleString(),"+"):N[1].toLocaleString()]})]}),(0,t.jsx)(m,{value:N,onValueChange:e=>v(e),min:0,max:5e6,step:1e5,className:"w-full"})]}),(0,t.jsxs)(o.$,{onClick:()=>{l({location:"all"===d?"":d,type:"all"===j?"":j,priceRange:N})},className:"w-full",size:"lg",children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),i("search.button")]})]})})})}var y=r(172),N=r(7891),v=r(9576);function b(){let{properties:e,isLoading:s}=(0,N.i)(),{user:r,loading:o}=(0,v.A)(),n=(0,l.useRouter)(),[d,c]=(0,a.useState)([]),{t:m}=(0,g.B)(),p=(0,l.useSearchParams)();(0,a.useEffect)(()=>{o||r||n.push("/landing")},[o,r,n]),(0,a.useEffect)(()=>{s||c(e)},[e,s]),(0,a.useEffect)(()=>{let r=p.get("q");r?c(e.filter(e=>e.title.toLowerCase().includes(r.toLowerCase())||e.location.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase()))):s||c(e)},[p,e,s]);let u=(0,a.useMemo)(()=>Array.from(new Set(e.map(e=>e.location))),[e]),f=(0,a.useMemo)(()=>Array.from(new Set(e.map(e=>e.type))),[e]);return o||s?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-8rem)]",children:(0,t.jsx)(y.A,{className:"h-16 w-16 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("section",{className:"text-center bg-card shadow-md rounded-xl p-8 md:p-12 mb-12",children:[(0,t.jsx)("h1",{className:"font-headline text-4xl md:text-6xl font-bold text-primary mb-4",children:m("home.title")}),(0,t.jsx)("p",{className:"text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:m("home.subtitle")}),(0,t.jsx)(j,{locations:u,propertyTypes:f,onSearch:s=>{let{location:r,type:t,priceRange:a}=s,[l,i]=a;c(e.filter(e=>{let s=!r||e.location===r,a=!t||e.type===t,o=e.price>=l&&e.price<=i;return s&&a&&o}))}})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"font-headline text-3xl font-semibold mb-8 text-primary",children:m("home.featuredListings")}),d.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:d.map(e=>(0,t.jsx)(i.y,{property:e},e.id))}):(0,t.jsx)("div",{className:"text-center py-16 bg-card rounded-lg",children:(0,t.jsx)("p",{className:"text-muted-foreground text-lg",children:m("home.noProperties")})})]})]})}},2600:(e,s,r)=>{Promise.resolve().then(r.bind(r,1132))},2695:(e,s,r)=>{"use strict";r.d(s,{W:()=>t});let t=(0,r(8693).vt)(e=>({properties:[],isLoading:!0,setIsLoading:s=>e({isLoading:s}),setProperties:s=>e({properties:s,isLoading:!1}),addProperty:s=>{e(e=>({properties:[s,...e.properties]}))},deleteProperty:s=>{e(e=>({properties:e.properties.filter(e=>e.id!==s)}))},updateProperty:(s,r)=>{e(e=>({properties:e.properties.map(e=>e.id===s?{...e,...r}:e)}))}}))},7891:(e,s,r)=>{"use strict";r.d(s,{PropertyProvider:()=>n,i:()=>d});var t=r(5155),a=r(2115),l=r(2695),i=r(2643);let o=(0,a.createContext)(void 0),n=e=>{let{children:s}=e,{properties:r,setProperties:n,isLoading:d,setIsLoading:c}=(0,l.W)(),m=(0,i.U)();return(0,a.useEffect)(()=>{let e=async()=>{c(!0);let{data:e,error:s}=await m.from("properties").select("*");if(s){console.error("Error fetching properties:",s),c(!1);return}if(!e)return void n([]);let r=[...new Set(e.map(e=>e.realtor_id))];if(0===r.length)return void n([]);let{data:t,error:a}=await m.from("profiles").select("user_id, full_name, avatar_url, username").in("user_id",r);if(a){console.error("Error fetching realtors:",a),c(!1);return}let l=new Map(t.map(e=>[e.user_id,e]));n(e.map(e=>{let s=l.get(e.realtor_id);return{...e,realtor:{user_id:e.realtor_id,full_name:(null==s?void 0:s.full_name)||"Anonymous",avatar_url:(null==s?void 0:s.avatar_url)||"https://placehold.co/100x100.png",username:(null==s?void 0:s.username)||""}}}))};0===r.length&&e()},[n,m,c,r.length]),(0,t.jsx)(o.Provider,{value:{properties:r,isLoading:d},children:s})},d=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("usePropertyContext must be used within a PropertyProvider");return e}},9409:(e,s,r)=>{"use strict";r.d(s,{bq:()=>p,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>m});var t=r(5155),a=r(2115),l=r(3433),i=r(9556),o=r(7381),n=r(518),d=r(9434);let c=l.bL;l.YJ;let m=l.WT,p=a.forwardRef((e,s)=>{let{className:r,children:a,...o}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[a,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=l.l9.displayName;let u=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let f=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let x=a.forwardRef((e,s)=>{let{className:r,children:a,position:i="popper",...o}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...o,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,t.jsx)(f,{})]})})});x.displayName=l.UC.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=l.JU.displayName;let h=a.forwardRef((e,s)=>{let{className:r,children:a,...i}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:a})]})});h.displayName=l.q7.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=l.wv.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[941,271,53,766,387,299,547,518,915,859,571,441,684,358],()=>s(2600)),_N_E=e.O()}]);