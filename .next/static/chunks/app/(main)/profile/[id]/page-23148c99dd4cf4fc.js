(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{1394:(e,a,s)=>{"use strict";s.d(a,{Avatar:()=>n,AvatarFallback:()=>o,AvatarImage:()=>d});var t=s(5155),r=s(2115),i=s(5977),l=s(9434);let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.bL,{ref:a,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});n.displayName=i.bL.displayName;let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i._V,{ref:a,className:(0,l.cn)("h-full w-full",s),...r})});d.displayName=i._V.displayName;let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.H4,{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});o.displayName=i.H4.displayName},2523:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var t=s(5155),r=s(2115),i=s(9434);let l=r.forwardRef((e,a)=>{let{className:s,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...l})});l.displayName="Input"},2695:(e,a,s)=>{"use strict";s.d(a,{W:()=>t});let t=(0,s(8693).vt)(e=>({properties:[],isLoading:!0,setIsLoading:a=>e({isLoading:a}),setProperties:a=>e({properties:a,isLoading:!1}),addProperty:a=>{e(e=>({properties:[a,...e.properties]}))},deleteProperty:a=>{e(e=>({properties:e.properties.filter(e=>e.id!==a)}))},updateProperty:(a,s)=>{e(e=>({properties:e.properties.map(e=>e.id===a?{...e,...s}:e)}))}}))},5057:(e,a,s)=>{"use strict";s.d(a,{J:()=>o});var t=s(5155),r=s(2115),i=s(968),l=s(2085),n=s(9434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.b,{ref:a,className:(0,n.cn)(d(),s),...r})});o.displayName=i.b.displayName},6424:(e,a,s)=>{"use strict";s.d(a,{F:()=>n});var t=s(5155),r=s(2115),i=s(7655),l=s(9434);let n=r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(i.bL,{ref:a,className:(0,l.cn)("relative overflow-hidden",s),...n,children:[(0,t.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(d,{}),(0,t.jsx)(i.OK,{})]})});n.displayName=i.bL.displayName;let d=r.forwardRef((e,a)=>{let{className:s,orientation:r="vertical",...n}=e;return(0,t.jsx)(i.VM,{ref:a,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,t.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.VM.displayName},6784:(e,a,s)=>{"use strict";s.d(a,{default:()=>en});var t=s(5155),r=s(2115),i=s(5695),l=s(1394),n=s(285),d=s(6695),o=s(172),c=s(462),m=s(4063),u=s(8763),f=s(6923),p=s(6950),x=s(8098),h=s(7223),g=s(1573),j=s(3571),v=s(6874),N=s.n(v),b=s(4302),y=s(704),w=s(9434);let _=y.bL,C=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(y.B8,{ref:a,className:(0,w.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});C.displayName=y.B8.displayName;let A=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(y.l9,{ref:a,className:(0,w.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});A.displayName=y.l9.displayName;let R=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(y.UC,{ref:a,className:(0,w.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});R.displayName=y.UC.displayName;var k=s(5821),E=s(5318);let S=k.bL,L=k.l9,P=k.ZL;k.bm;let U=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(k.hJ,{ref:a,className:(0,w.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});U.displayName=k.hJ.displayName;let z=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsxs)(P,{children:[(0,t.jsx)(U,{}),(0,t.jsxs)(k.UC,{ref:a,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[r,(0,t.jsxs)(k.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(E.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});z.displayName=k.UC.displayName;let F=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};F.displayName="DialogHeader";let D=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};D.displayName="DialogFooter";let Z=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(k.hE,{ref:a,className:(0,w.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});Z.displayName=k.hE.displayName;let $=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(k.VY,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",s),...r})});$.displayName=k.VY.displayName;var q=s(2278);let V=q.bL,I=q.l9,T=q.ZL,B=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(q.hJ,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:a})});B.displayName=q.hJ.displayName;let W=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsxs)(T,{children:[(0,t.jsx)(B,{}),(0,t.jsx)(q.UC,{ref:a,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});W.displayName=q.UC.displayName;let J=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};J.displayName="AlertDialogHeader";let M=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};M.displayName="AlertDialogFooter";let O=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(q.hE,{ref:a,className:(0,w.cn)("text-lg font-semibold",s),...r})});O.displayName=q.hE.displayName;let Y=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(q.VY,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",s),...r})});Y.displayName=q.VY.displayName;let H=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(q.rc,{ref:a,className:(0,w.cn)((0,n.r)(),s),...r})});H.displayName=q.rc.displayName;let G=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(q.ZD,{ref:a,className:(0,w.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});G.displayName=q.ZD.displayName;var K=s(6766),Q=s(9137),X=s(9576),ee=s(7481),ea=s(2523),es=s(5057),et=s(3833);s(4534);var er=s(6424),ei=s(2695),el=s(8539);function en(e){var a;let{profileId:s}=e,{user:v,loading:y,supabase:k}=(0,X.A)(),{deleteProperty:E}=(0,ei.W)(),{t:P}=(0,Q.B)(),{toast:U}=(0,ee.dj)(),q=(0,i.useRouter)(),{favorites:T}=(0,b.r)(),[B,en]=(0,r.useState)(null),[ed,eo]=(0,r.useState)([]),[ec,em]=(0,r.useState)([]),[eu,ef]=(0,r.useState)({average:0,count:0}),[ep,ex]=(0,r.useState)(!0),[eh,eg]=(0,r.useState)(!1),[ej,ev]=(0,r.useState)(""),eN=(0,r.useRef)(null),eb=(0,r.useRef)(null),[ey,ew]=(0,r.useState)(),[e_,eC]=(0,r.useState)(),[eA,eR]=(0,r.useState)(1),[ek,eE]=(0,r.useState)(!1),[eS,eL]=(0,r.useState)(!1),[eP,eU]=(0,r.useState)(0),[ez,eF]=(0,r.useState)(0),[eD,eZ]=(0,r.useState)(""),[e$,eq]=(0,r.useState)(!1),eV=async e=>{if(!k)return;let{data:a,error:s}=await k.from("ratings").select("rating, comment, created_at").eq("rated_user_id",e).order("created_at",{ascending:!1});if(s){console.error("Error fetching ratings:",s),ef({average:0,count:0}),em([]);return}em(a);let t=a.length;ef({average:t>0?a.reduce((e,a)=>e+a.rating,0)/t:0,count:t})},eI=function(e){let a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];clearTimeout(a),a=setTimeout(()=>e.apply(this,r),s)}}(async()=>{(null==e_?void 0:e_.width)&&e_.height&&eb.current&&eN.current&&await (0,w.d)(eb.current,eN.current,e_)},100);(0,r.useEffect)(()=>{eI()},[e_,eI]),(0,r.useEffect)(()=>{let e=async()=>{if(!s||!k)return void ex(!1);ex(!0);let{data:e,error:a}=await k.from("profiles").select("*").eq("user_id",s).single();if(a||!e){console.error("Error fetching profile:",a),en(null),ex(!1);return}en(e),eV(e.user_id);let{data:t,error:r}=await k.from("properties").select("*, realtor:realtor_id(user_id, full_name, avatar_url, username)").eq("realtor_id",e.user_id);r?console.error("Error fetching properties for profile:",r):eo(t),ex(!1)};y||e()},[s,k,y]);let eT=async e=>{if(!k)return;let{error:a}=await k.from("properties").delete().eq("id",e);a?U({title:"Error al eliminar",description:"No se pudo eliminar la propiedad.",variant:"destructive"}):(E(e),eo(a=>a.filter(a=>a.id!==e)),U({title:"Propiedad eliminada",description:"Tu propiedad ha sido eliminada exitosamente."}))},eB=ep||y,eW=v&&v.id===(null==B?void 0:B.user_id);if(eB)return(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-8rem)]",children:(0,t.jsx)(o.A,{className:"h-16 w-16 animate-spin text-primary"})});if(!B)return(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-8rem)]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Usuario no encontrado"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"El perfil que buscas no existe."}),(0,t.jsx)(n.$,{asChild:!0,className:"mt-4",children:(0,t.jsx)(N(),{href:"/",children:"Ir al Inicio"})})]})});let eJ=e=>new Promise(a=>{e.toBlob(e=>a(e),"image/png",1)}),eM=async()=>{if(!eN.current||!v||!e_||!k)return void U({title:"Crop Error",description:"Please select an image and crop it first.",variant:"destructive"});eE(!0);let e=eN.current,a=await eJ(e);if(!a){U({title:"Error",description:"Could not process image.",variant:"destructive"}),eE(!1);return}let s="".concat(v.id,"/").concat(Date.now(),".png");try{let{error:e}=await k.storage.from("avatars").upload(s,a,{upsert:!0});if(e)throw e;let{data:{publicUrl:t}}=k.storage.from("avatars").getPublicUrl(s),{error:r}=await k.auth.updateUser({data:{avatar_url:t}});if(r)throw r;let{error:i}=await k.from("profiles").update({avatar_url:t,updated_at:new Date().toISOString()}).eq("user_id",v.id);if(i)throw i;en(e=>e?{...e,avatar_url:t}:null),U({title:"Profile Picture Updated!",description:"Your new avatar is now live."})}catch(e){console.error("Error updating profile picture:",e),U({title:"Upload Failed",description:e.message,variant:"destructive"})}finally{eE(!1),eg(!1),ev("")}},eO=async()=>{if(!v||eW||!k)return void U({title:"Acci\xf3n no permitida",description:"No puedes calificarte a ti mismo.",variant:"destructive"});if(0===eP)return void U({title:"Calificaci\xf3n requerida",description:"Por favor, selecciona una calificaci\xf3n de 1 a 5 estrellas.",variant:"destructive"});eL(!0);let{error:e}=await k.from("ratings").upsert({rated_user_id:B.user_id,rater_user_id:v.id,rating:eP,comment:eD},{onConflict:"rated_user_id, rater_user_id"});e?(console.error("Error submitting rating:",e),U({title:"Error",description:"No se pudo guardar tu calificaci\xf3n. "+e.message,variant:"destructive"})):(U({title:"\xa1Gracias!",description:"Tu calificaci\xf3n ha sido guardada."}),await eV(B.user_id),eq(!1),eU(0),eF(0),eZ("")),eL(!1)},eY=async()=>{if(v&&k&&!eW)try{let{data:e,error:a}=await k.from("conversations").select("id").or("and(buyer_id.eq.".concat(v.id,",seller_id.eq.").concat(B.user_id,"),and(buyer_id.eq.").concat(B.user_id,",seller_id.eq.").concat(v.id,")")).maybeSingle();if(a)throw a;if(e)return void q.push("/messages");let{data:s,error:t}=await k.from("conversations").insert({buyer_id:v.id,seller_id:B.user_id}).select("id").single();if(t)throw t;q.push("/messages")}catch(e){console.error("Error starting conversation:",e),U({title:"Could not start chat",description:e.message,variant:"destructive"})}},eH=(null==(a=B.full_name)?void 0:a.charAt(0).toUpperCase())||"?";return(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,t.jsxs)(d.Zp,{className:"overflow-hidden shadow-lg",children:[(0,t.jsx)(d.aR,{className:"p-0",children:(0,t.jsx)("div",{className:"bg-primary/10 h-24"})}),(0,t.jsx)(d.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-start -mt-20",children:[(0,t.jsxs)("div",{className:"flex-grow pt-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary",children:B.full_name}),v?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center text-amber-500",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)(c.A,{className:(0,w.cn)("w-5 h-5",a<Math.round(eu.average)?"fill-current":"text-muted-foreground fill-muted")},a))}),(0,t.jsxs)("span",{className:"text-muted-foreground text-sm",children:["(",eu.count," ",P("profile.ratings"),")"]})]}),!eW&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S,{open:e$,onOpenChange:eq,children:[(0,t.jsx)(L,{asChild:!0,children:(0,t.jsx)(n.$,{variant:"outline",size:"sm",children:"Calificar Usuario"})}),(0,t.jsxs)(z,{children:[(0,t.jsxs)(F,{children:[(0,t.jsxs)(Z,{children:["Califica a ",B.full_name]}),(0,t.jsx)($,{children:"Tu opini\xf3n ayuda a otros a encontrar agentes de confianza."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,t.jsx)("div",{className:"flex justify-center items-center gap-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>{let s=a+1;return(0,t.jsx)(c.A,{className:(0,w.cn)("h-8 w-8 cursor-pointer transition-colors",s<=(ez||eP)?"text-amber-500 fill-amber-500":"text-muted-foreground"),onClick:()=>eU(s),onMouseEnter:()=>eF(s),onMouseLeave:()=>eF(0)},a)})}),(0,t.jsx)(el.T,{placeholder:"Deja un comentario an\xf3nimo (opcional)...",value:eD,onChange:e=>eZ(e.target.value),className:"min-h-[100px]"})]}),(0,t.jsxs)(D,{children:[(0,t.jsx)(n.$,{variant:"ghost",onClick:()=>eq(!1),children:"Cancelar"}),(0,t.jsx)(n.$,{onClick:eO,disabled:eS,children:eS?(0,t.jsx)(o.A,{className:"animate-spin"}):"Enviar Calificaci\xf3n"})]})]})]}),(0,t.jsxs)(n.$,{size:"sm",onClick:eY,children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Contactar"]})]})]})}):(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Inicia sesi\xf3n para ver m\xe1s detalles."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,t.jsxs)(S,{children:[(0,t.jsx)(L,{asChild:!0,children:(0,t.jsxs)(l.Avatar,{className:"h-32 w-32 border-4 border-background bg-background cursor-pointer hover:ring-4 hover:ring-primary transition-all duration-300",children:[(0,t.jsx)(l.AvatarImage,{src:B.avatar_url||void 0,alt:"User avatar","data-ai-hint":"person face",className:"object-cover"}),(0,t.jsx)(l.AvatarFallback,{children:eH})]})}),(0,t.jsxs)(z,{className:"p-0 border-0 bg-transparent shadow-none max-w-2xl",children:[(0,t.jsx)(F,{children:(0,t.jsx)(Z,{className:"sr-only",children:P("profile.avatarAlt",{name:B.full_name})})}),(0,t.jsx)(K.default,{src:B.avatar_url||"https://placehold.co/800x800.png",alt:"User avatar enlarged",width:800,height:800,className:"rounded-lg object-contain","data-ai-hint":"person face"})]})]}),eW&&(0,t.jsxs)(S,{open:eh,onOpenChange:eg,children:[(0,t.jsx)(L,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"outline",children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Edit Profile"]})}),(0,t.jsxs)(z,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(Z,{children:P("profile.edit.title")}),(0,t.jsx)($,{children:P("profile.edit.description")})]}),(0,t.jsx)(er.F,{className:"max-h-[70vh] p-4",children:(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,t.jsx)(es.J,{htmlFor:"picture",children:"Change Picture"}),(0,t.jsx)(ea.p,{id:"picture",type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){ew(void 0);let a=new FileReader;a.addEventListener("load",()=>{var e;return ev((null==(e=a.result)?void 0:e.toString())||"")}),a.readAsDataURL(e.target.files[0])}}})]}),ej&&(0,t.jsx)("div",{className:"mt-4 flex flex-col items-center",children:(0,t.jsx)(et.Ay,{crop:ey,onChange:(e,a)=>ew(a),onComplete:e=>eC(e),aspect:eA,circularCrop:!0,children:(0,t.jsx)(K.default,{ref:eb,alt:"Crop me",src:ej,width:800,height:600,onLoad:function(e){if(eA){let{width:a,height:s}=e.currentTarget;ew((0,et.ge)((0,et.dS)({unit:"%",width:90},eA,a,s),a,s))}},className:"object-contain"})})}),!!e_&&(0,t.jsxs)("div",{className:"mt-4 flex flex-col items-center",children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Preview"}),(0,t.jsx)("div",{children:(0,t.jsx)("canvas",{ref:eN,style:{border:"1px solid black",objectFit:"contain",width:e_.width,height:e_.height,borderRadius:"50%"}})})]})]})}),(0,t.jsx)(D,{children:(0,t.jsxs)(n.$,{onClick:eM,disabled:ek||!e_,children:[ek?(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Upload & Save"]})})]})]})]})]})})]}),v?(0,t.jsxs)(_,{defaultValue:"listed",className:"w-full",children:[(0,t.jsxs)(C,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(A,{value:"listed",children:[(0,t.jsx)(p.A,{className:"mr-2"})," ",P("profile.tabs.listed")]}),(0,t.jsxs)(A,{value:"ratings",children:[(0,t.jsx)(c.A,{className:"mr-2"})," Valoraciones"]}),(0,t.jsxs)(A,{value:"saved",children:[(0,t.jsx)(x.A,{className:"mr-2"})," ",P("profile.tabs.saved")]})]}),(0,t.jsx)(R,{value:"listed",children:(0,t.jsxs)(d.Zp,{className:"mt-4",children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Propiedades Listadas"})}),(0,t.jsx)(d.Wu,{children:ed.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ed.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[eW&&(0,t.jsxs)("div",{className:"absolute top-2 right-14 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(n.$,{size:"icon",variant:"outline",className:"bg-background",asChild:!0,children:(0,t.jsx)(N(),{href:"/edit-property/".concat(e.id),children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(V,{children:[(0,t.jsx)(I,{asChild:!0,children:(0,t.jsx)(n.$,{size:"icon",variant:"destructive",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(W,{children:[(0,t.jsxs)(J,{children:[(0,t.jsx)(O,{children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(Y,{children:"Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente la propiedad de los servidores."})]}),(0,t.jsxs)(M,{children:[(0,t.jsx)(G,{children:"Cancelar"}),(0,t.jsx)(H,{onClick:()=>eT(e.id),children:"S\xed, eliminar propiedad"})]})]})]})]}),(0,t.jsx)(j.y,{property:e})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:eW?P("profile.empty.listed.own"):P("profile.empty.listed.other",{name:B.full_name})}),eW&&(0,t.jsx)(n.$,{asChild:!0,children:(0,t.jsx)(N(),{href:"/properties/new",children:"Listar una propiedad"})})]})})]})}),(0,t.jsx)(R,{value:"ratings",children:(0,t.jsxs)(d.Zp,{className:"mt-4",children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Valoraciones Recibidas"})}),(0,t.jsx)(d.Wu,{children:ec.length>0?(0,t.jsx)(er.F,{className:"h-[400px]",children:(0,t.jsx)("div",{className:"space-y-6",children:ec.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-b pb-4 last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center text-amber-500",children:[void 0,void 0,void 0,void 0,void 0].map((a,s)=>(0,t.jsx)(c.A,{className:(0,w.cn)("w-4 h-4",s<e.rating?"fill-current":"text-muted-foreground/50 fill-muted")},s))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),e.comment&&(0,t.jsxs)("p",{className:"text-muted-foreground italic",children:['"',e.comment,'"']})]},a))})}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)(m.A,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Este usuario a\xfan no ha recibido ninguna valoraci\xf3n."})]})})]})}),(0,t.jsx)(R,{value:"saved",children:(0,t.jsxs)(d.Zp,{className:"mt-4",children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Tus Propiedades Guardadas"})}),(0,t.jsx)(d.Wu,{className:"p-6",children:T.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:T.map(e=>(0,t.jsx)(j.y,{property:e},e.id))}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:eW?P("profile.empty.saved.description"):"A\xfan no has guardado ninguna de las propiedades de ".concat(B.full_name,".")}),(0,t.jsx)(n.$,{asChild:!0,children:(0,t.jsx)(N(),{href:"/",children:P("profile.empty.saved.button")})})]})})]})})]}):(0,t.jsx)(d.Zp,{children:(0,t.jsxs)(d.Wu,{className:"p-10 text-center",children:[(0,t.jsx)(g.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 text-primary",children:"Contenido exclusivo para miembros"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Inicia sesi\xf3n para ver las propiedades listadas y guardadas de este usuario."}),(0,t.jsx)(n.$,{asChild:!0,size:"lg",children:(0,t.jsx)(N(),{href:"/login",children:"Iniciar Sesi\xf3n"})})]})})]})})}},8539:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var t=s(5155),r=s(2115),i=s(9434);let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});l.displayName="Textarea"},9938:(e,a,s)=>{Promise.resolve().then(s.bind(s,6784))}},e=>{var a=a=>e(e.s=a);e.O(0,[111,941,271,53,766,387,299,355,385,859,571,441,684,358],()=>a(9938)),_N_E=e.O()}]);