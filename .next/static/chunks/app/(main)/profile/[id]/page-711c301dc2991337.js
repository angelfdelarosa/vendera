(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{1394:(e,a,s)=>{"use strict";s.d(a,{Avatar:()=>n,AvatarFallback:()=>o,AvatarImage:()=>d});var r=s(5155),t=s(2115),i=s(5977),l=s(9434);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(i.bL,{ref:a,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t})});n.displayName=i.bL.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(i._V,{ref:a,className:(0,l.cn)("h-full w-full",s),...t})});d.displayName=i._V.displayName;let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(i.H4,{ref:a,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t})});o.displayName=i.H4.displayName},2523:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var r=s(5155),t=s(2115),i=s(9434);let l=t.forwardRef((e,a)=>{let{className:s,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...l})});l.displayName="Input"},2695:(e,a,s)=>{"use strict";s.d(a,{W:()=>r});let r=(0,s(8693).vt)(e=>({properties:[],isLoading:!0,setIsLoading:a=>e({isLoading:a}),setProperties:a=>e({properties:a,isLoading:!1}),addProperty:a=>{e(e=>({properties:[a,...e.properties]}))},deleteProperty:a=>{e(e=>({properties:e.properties.filter(e=>e.id!==a)}))},updateProperty:(a,s)=>{e(e=>({properties:e.properties.map(e=>e.id===a?{...e,...s}:e)}))}}))},5057:(e,a,s)=>{"use strict";s.d(a,{J:()=>o});var r=s(5155),t=s(2115),i=s(968),l=s(2085),n=s(9434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(i.b,{ref:a,className:(0,n.cn)(d(),s),...t})});o.displayName=i.b.displayName},6424:(e,a,s)=>{"use strict";s.d(a,{F:()=>n});var r=s(5155),t=s(2115),i=s(7655),l=s(9434);let n=t.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,r.jsxs)(i.bL,{ref:a,className:(0,l.cn)("relative overflow-hidden",s),...n,children:[(0,r.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(d,{}),(0,r.jsx)(i.OK,{})]})});n.displayName=i.bL.displayName;let d=t.forwardRef((e,a)=>{let{className:s,orientation:t="vertical",...n}=e;return(0,r.jsx)(i.VM,{ref:a,orientation:t,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,r.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.VM.displayName},8539:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var r=s(5155),t=s(2115),i=s(9434);let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...t})});l.displayName="Textarea"},8750:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ed});var r=s(5155),t=s(2115),i=s(5695),l=s(1394),n=s(285),d=s(6695),o=s(172),c=s(462),m=s(4063),u=s(8763),f=s(6923),p=s(6950),x=s(8098),h=s(7223),g=s(1573),j=s(3571),v=s(6874),N=s.n(v),b=s(4302),y=s(704),w=s(9434);let _=y.bL,C=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(y.B8,{ref:a,className:(0,w.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})});C.displayName=y.B8.displayName;let A=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(y.l9,{ref:a,className:(0,w.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t})});A.displayName=y.l9.displayName;let R=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(y.UC,{ref:a,className:(0,w.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});R.displayName=y.UC.displayName;var k=s(5821),E=s(5318);let S=k.bL,L=k.l9,P=k.ZL;k.bm;let U=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(k.hJ,{ref:a,className:(0,w.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t})});U.displayName=k.hJ.displayName;let z=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(P,{children:[(0,r.jsx)(U,{}),(0,r.jsxs)(k.UC,{ref:a,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[t,(0,r.jsxs)(k.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(E.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});z.displayName=k.UC.displayName;let F=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};F.displayName="DialogHeader";let D=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};D.displayName="DialogFooter";let Z=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(k.hE,{ref:a,className:(0,w.cn)("text-lg font-semibold leading-none tracking-tight",s),...t})});Z.displayName=k.hE.displayName;let $=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(k.VY,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",s),...t})});$.displayName=k.VY.displayName;var q=s(2278);let V=q.bL,I=q.l9,T=q.ZL,B=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(q.hJ,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a})});B.displayName=q.hJ.displayName;let W=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(B,{}),(0,r.jsx)(q.UC,{ref:a,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]})});W.displayName=q.UC.displayName;let J=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};J.displayName="AlertDialogHeader";let M=e=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};M.displayName="AlertDialogFooter";let O=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(q.hE,{ref:a,className:(0,w.cn)("text-lg font-semibold",s),...t})});O.displayName=q.hE.displayName;let Y=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(q.VY,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",s),...t})});Y.displayName=q.VY.displayName;let H=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(q.rc,{ref:a,className:(0,w.cn)((0,n.r)(),s),...t})});H.displayName=q.rc.displayName;let G=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(q.ZD,{ref:a,className:(0,w.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...t})});G.displayName=q.ZD.displayName;var K=s(6766),Q=s(9137),X=s(9576),ee=s(7481),ea=s(2523),es=s(5057),er=s(3833);s(4534);var et=s(6424),ei=s(2695),el=s(8539);function en(){var e;let{user:a,loading:s,supabase:v}=(0,X.A)(),{deleteProperty:y}=(0,ei.W)(),{t:k}=(0,Q.B)(),{toast:E}=(0,ee.dj)(),P=(0,i.useRouter)(),U=(0,i.useParams)().id,{favorites:q}=(0,b.r)(),[T,B]=(0,t.useState)(null),[en,ed]=(0,t.useState)([]),[eo,ec]=(0,t.useState)([]),[em,eu]=(0,t.useState)({average:0,count:0}),[ef,ep]=(0,t.useState)(!0),[ex,eh]=(0,t.useState)(!1),[eg,ej]=(0,t.useState)(""),ev=(0,t.useRef)(null),eN=(0,t.useRef)(null),[eb,ey]=(0,t.useState)(),[ew,e_]=(0,t.useState)(),[eC,eA]=(0,t.useState)(1),[eR,ek]=(0,t.useState)(!1),[eE,eS]=(0,t.useState)(!1),[eL,eP]=(0,t.useState)(0),[eU,ez]=(0,t.useState)(0),[eF,eD]=(0,t.useState)(""),[eZ,e$]=(0,t.useState)(!1),eq=async e=>{if(!v)return;let{data:a,error:s}=await v.from("ratings").select("rating, comment, created_at").eq("rated_user_id",e).order("created_at",{ascending:!1});if(s){console.error("Error fetching ratings:",s),eu({average:0,count:0}),ec([]);return}ec(a);let r=a.length;eu({average:r>0?a.reduce((e,a)=>e+a.rating,0)/r:0,count:r})},eV=function(e){let a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,t=Array(r),i=0;i<r;i++)t[i]=arguments[i];clearTimeout(a),a=setTimeout(()=>e.apply(this,t),s)}}(async()=>{(null==ew?void 0:ew.width)&&ew.height&&eN.current&&ev.current&&await (0,w.d)(eN.current,ev.current,ew)},100);(0,t.useEffect)(()=>{eV()},[ew,eV]),(0,t.useEffect)(()=>{let e=async()=>{if(!U||!v)return void ep(!1);ep(!0);let{data:e,error:a}=await v.from("profiles").select("*").eq("user_id",U).single();if(a||!e){console.error("Error fetching profile:",a),B(null),ep(!1);return}B(e),eq(e.user_id);let{data:s,error:r}=await v.from("properties").select("*, realtor:realtor_id(user_id, full_name, avatar_url, username)").eq("realtor_id",e.user_id);r?console.error("Error fetching properties for profile:",r):ed(s),ep(!1)};s||e()},[U,v,s]);let eI=async e=>{if(!v)return;let{error:a}=await v.from("properties").delete().eq("id",e);a?E({title:"Error al eliminar",description:"No se pudo eliminar la propiedad.",variant:"destructive"}):(y(e),ed(a=>a.filter(a=>a.id!==e)),E({title:"Propiedad eliminada",description:"Tu propiedad ha sido eliminada exitosamente."}))},eT=ef||s,eB=a&&a.id===(null==T?void 0:T.user_id);if(eT)return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-8rem)]",children:(0,r.jsx)(o.A,{className:"h-16 w-16 animate-spin text-primary"})});if(!T)return(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-8rem)]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Usuario no encontrado"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"El perfil que buscas no existe."}),(0,r.jsx)(n.$,{asChild:!0,className:"mt-4",children:(0,r.jsx)(N(),{href:"/",children:"Ir al Inicio"})})]})});let eW=e=>new Promise(a=>{e.toBlob(e=>a(e),"image/png",1)}),eJ=async()=>{if(!ev.current||!a||!ew||!v)return void E({title:"Crop Error",description:"Please select an image and crop it first.",variant:"destructive"});ek(!0);let e=ev.current,s=await eW(e);if(!s){E({title:"Error",description:"Could not process image.",variant:"destructive"}),ek(!1);return}let r="".concat(a.id,"/").concat(Date.now(),".png");try{let{error:e}=await v.storage.from("avatars").upload(r,s,{upsert:!0});if(e)throw e;let{data:{publicUrl:t}}=v.storage.from("avatars").getPublicUrl(r),{error:i}=await v.auth.updateUser({data:{avatar_url:t}});if(i)throw i;let{error:l}=await v.from("profiles").update({avatar_url:t,updated_at:new Date().toISOString()}).eq("user_id",a.id);if(l)throw l;B(e=>e?{...e,avatar_url:t}:null),E({title:"Profile Picture Updated!",description:"Your new avatar is now live."})}catch(e){console.error("Error updating profile picture:",e),E({title:"Upload Failed",description:e.message,variant:"destructive"})}finally{ek(!1),eh(!1),ej("")}},eM=async()=>{if(!a||eB||!v)return void E({title:"Acci\xf3n no permitida",description:"No puedes calificarte a ti mismo.",variant:"destructive"});if(0===eL)return void E({title:"Calificaci\xf3n requerida",description:"Por favor, selecciona una calificaci\xf3n de 1 a 5 estrellas.",variant:"destructive"});eS(!0);let{error:e}=await v.from("ratings").upsert({rated_user_id:T.user_id,rater_user_id:a.id,rating:eL,comment:eF},{onConflict:"rated_user_id, rater_user_id"});e?(console.error("Error submitting rating:",e),E({title:"Error",description:"No se pudo guardar tu calificaci\xf3n. "+e.message,variant:"destructive"})):(E({title:"\xa1Gracias!",description:"Tu calificaci\xf3n ha sido guardada."}),await eq(T.user_id),e$(!1),eP(0),ez(0),eD("")),eS(!1)},eO=async()=>{if(a&&v&&!eB)try{let{data:e,error:s}=await v.from("conversations").select("id").or("and(buyer_id.eq.".concat(a.id,",seller_id.eq.").concat(T.user_id,"),and(buyer_id.eq.").concat(T.user_id,",seller_id.eq.").concat(a.id,")")).maybeSingle();if(s)throw s;if(e)return void P.push("/messages");let{data:r,error:t}=await v.from("conversations").insert({buyer_id:a.id,seller_id:T.user_id}).select("id").single();if(t)throw t;P.push("/messages")}catch(e){console.error("Error starting conversation:",e),E({title:"Could not start chat",description:e.message,variant:"destructive"})}},eY=(null==(e=T.full_name)?void 0:e.charAt(0).toUpperCase())||"?";return(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,r.jsxs)(d.Zp,{className:"overflow-hidden shadow-lg",children:[(0,r.jsx)(d.aR,{className:"p-0",children:(0,r.jsx)("div",{className:"bg-primary/10 h-24"})}),(0,r.jsx)(d.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-start -mt-20",children:[(0,r.jsxs)("div",{className:"flex-grow pt-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-headline font-bold text-primary",children:T.full_name}),a?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center text-amber-500",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,r.jsx)(c.A,{className:(0,w.cn)("w-5 h-5",a<Math.round(em.average)?"fill-current":"text-muted-foreground fill-muted")},a))}),(0,r.jsxs)("span",{className:"text-muted-foreground text-sm",children:["(",em.count," ",k("profile.ratings"),")"]})]}),!eB&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(S,{open:eZ,onOpenChange:e$,children:[(0,r.jsx)(L,{asChild:!0,children:(0,r.jsx)(n.$,{variant:"outline",size:"sm",children:"Calificar Usuario"})}),(0,r.jsxs)(z,{children:[(0,r.jsxs)(F,{children:[(0,r.jsxs)(Z,{children:["Califica a ",T.full_name]}),(0,r.jsx)($,{children:"Tu opini\xf3n ayuda a otros a encontrar agentes de confianza."})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 py-4",children:[(0,r.jsx)("div",{className:"flex justify-center items-center gap-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>{let s=a+1;return(0,r.jsx)(c.A,{className:(0,w.cn)("h-8 w-8 cursor-pointer transition-colors",s<=(eU||eL)?"text-amber-500 fill-amber-500":"text-muted-foreground"),onClick:()=>eP(s),onMouseEnter:()=>ez(s),onMouseLeave:()=>ez(0)},a)})}),(0,r.jsx)(el.T,{placeholder:"Deja un comentario an\xf3nimo (opcional)...",value:eF,onChange:e=>eD(e.target.value),className:"min-h-[100px]"})]}),(0,r.jsxs)(D,{children:[(0,r.jsx)(n.$,{variant:"ghost",onClick:()=>e$(!1),children:"Cancelar"}),(0,r.jsx)(n.$,{onClick:eM,disabled:eE,children:eE?(0,r.jsx)(o.A,{className:"animate-spin"}):"Enviar Calificaci\xf3n"})]})]})]}),(0,r.jsxs)(n.$,{size:"sm",onClick:eO,children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Contactar"]})]})]})}):(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Inicia sesi\xf3n para ver m\xe1s detalles."})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsxs)(S,{children:[(0,r.jsx)(L,{asChild:!0,children:(0,r.jsxs)(l.Avatar,{className:"h-32 w-32 border-4 border-background bg-background cursor-pointer hover:ring-4 hover:ring-primary transition-all duration-300",children:[(0,r.jsx)(l.AvatarImage,{src:T.avatar_url||void 0,alt:"User avatar","data-ai-hint":"person face",className:"object-cover"}),(0,r.jsx)(l.AvatarFallback,{children:eY})]})}),(0,r.jsxs)(z,{className:"p-0 border-0 bg-transparent shadow-none max-w-2xl",children:[(0,r.jsx)(F,{children:(0,r.jsx)(Z,{className:"sr-only",children:k("profile.avatarAlt",{name:T.full_name})})}),(0,r.jsx)(K.default,{src:T.avatar_url||"https://placehold.co/800x800.png",alt:"User avatar enlarged",width:800,height:800,className:"rounded-lg object-contain","data-ai-hint":"person face"})]})]}),eB&&(0,r.jsxs)(S,{open:ex,onOpenChange:eh,children:[(0,r.jsx)(L,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"outline",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Edit Profile"]})}),(0,r.jsxs)(z,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(F,{children:[(0,r.jsx)(Z,{children:k("profile.edit.title")}),(0,r.jsx)($,{children:k("profile.edit.description")})]}),(0,r.jsx)(et.F,{className:"max-h-[70vh] p-4",children:(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,r.jsx)(es.J,{htmlFor:"picture",children:"Change Picture"}),(0,r.jsx)(ea.p,{id:"picture",type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){ey(void 0);let a=new FileReader;a.addEventListener("load",()=>{var e;return ej((null==(e=a.result)?void 0:e.toString())||"")}),a.readAsDataURL(e.target.files[0])}}})]}),eg&&(0,r.jsx)("div",{className:"mt-4 flex flex-col items-center",children:(0,r.jsx)(er.Ay,{crop:eb,onChange:(e,a)=>ey(a),onComplete:e=>e_(e),aspect:eC,circularCrop:!0,children:(0,r.jsx)(K.default,{ref:eN,alt:"Crop me",src:eg,width:800,height:600,onLoad:function(e){if(eC){let{width:a,height:s}=e.currentTarget;ey((0,er.ge)((0,er.dS)({unit:"%",width:90},eC,a,s),a,s))}},className:"object-contain"})})}),!!ew&&(0,r.jsxs)("div",{className:"mt-4 flex flex-col items-center",children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Preview"}),(0,r.jsx)("div",{children:(0,r.jsx)("canvas",{ref:ev,style:{border:"1px solid black",objectFit:"contain",width:ew.width,height:ew.height,borderRadius:"50%"}})})]})]})}),(0,r.jsx)(D,{children:(0,r.jsxs)(n.$,{onClick:eJ,disabled:eR||!ew,children:[eR?(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Upload & Save"]})})]})]})]})]})})]}),a?(0,r.jsxs)(_,{defaultValue:"listed",className:"w-full",children:[(0,r.jsxs)(C,{className:"grid w-full grid-cols-3",children:[(0,r.jsxs)(A,{value:"listed",children:[(0,r.jsx)(p.A,{className:"mr-2"})," ",k("profile.tabs.listed")]}),(0,r.jsxs)(A,{value:"ratings",children:[(0,r.jsx)(c.A,{className:"mr-2"})," Valoraciones"]}),(0,r.jsxs)(A,{value:"saved",children:[(0,r.jsx)(x.A,{className:"mr-2"})," ",k("profile.tabs.saved")]})]}),(0,r.jsx)(R,{value:"listed",children:(0,r.jsxs)(d.Zp,{className:"mt-4",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Propiedades Listadas"})}),(0,r.jsx)(d.Wu,{children:en.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:en.map(e=>(0,r.jsxs)("div",{className:"relative group",children:[eB&&(0,r.jsxs)("div",{className:"absolute top-2 right-14 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(n.$,{size:"icon",variant:"outline",className:"bg-background",asChild:!0,children:(0,r.jsx)(N(),{href:"/edit-property/".concat(e.id),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})}),(0,r.jsxs)(V,{children:[(0,r.jsx)(I,{asChild:!0,children:(0,r.jsx)(n.$,{size:"icon",variant:"destructive",children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})}),(0,r.jsxs)(W,{children:[(0,r.jsxs)(J,{children:[(0,r.jsx)(O,{children:"\xbfEst\xe1s seguro?"}),(0,r.jsx)(Y,{children:"Esta acci\xf3n no se puede deshacer. Esto eliminar\xe1 permanentemente la propiedad de los servidores."})]}),(0,r.jsxs)(M,{children:[(0,r.jsx)(G,{children:"Cancelar"}),(0,r.jsx)(H,{onClick:()=>eI(e.id),children:"S\xed, eliminar propiedad"})]})]})]})]}),(0,r.jsx)(j.y,{property:e})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:eB?k("profile.empty.listed.own"):k("profile.empty.listed.other",{name:T.full_name})}),eB&&(0,r.jsx)(n.$,{asChild:!0,children:(0,r.jsx)(N(),{href:"/properties/new",children:"Listar una propiedad"})})]})})]})}),(0,r.jsx)(R,{value:"ratings",children:(0,r.jsxs)(d.Zp,{className:"mt-4",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Valoraciones Recibidas"})}),(0,r.jsx)(d.Wu,{children:eo.length>0?(0,r.jsx)(et.F,{className:"h-[400px]",children:(0,r.jsx)("div",{className:"space-y-6",children:eo.map((e,a)=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 border-b pb-4 last:border-b-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex items-center text-amber-500",children:[void 0,void 0,void 0,void 0,void 0].map((a,s)=>(0,r.jsx)(c.A,{className:(0,w.cn)("w-4 h-4",s<e.rating?"fill-current":"text-muted-foreground/50 fill-muted")},s))}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),e.comment&&(0,r.jsxs)("p",{className:"text-muted-foreground italic",children:['"',e.comment,'"']})]},a))})}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(m.A,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Este usuario a\xfan no ha recibido ninguna valoraci\xf3n."})]})})]})}),(0,r.jsx)(R,{value:"saved",children:(0,r.jsxs)(d.Zp,{className:"mt-4",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)(d.ZB,{children:"Tus Propiedades Guardadas"})}),(0,r.jsx)(d.Wu,{className:"p-6",children:q.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:q.map(e=>(0,r.jsx)(j.y,{property:e},e.id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:eB?k("profile.empty.saved.description"):"A\xfan no has guardado ninguna de las propiedades de ".concat(T.full_name,".")}),(0,r.jsx)(n.$,{asChild:!0,children:(0,r.jsx)(N(),{href:"/",children:k("profile.empty.saved.button")})})]})})]})})]}):(0,r.jsx)(d.Zp,{children:(0,r.jsxs)(d.Wu,{className:"p-10 text-center",children:[(0,r.jsx)(g.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2 text-primary",children:"Contenido exclusivo para miembros"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Inicia sesi\xf3n para ver las propiedades listadas y guardadas de este usuario."}),(0,r.jsx)(n.$,{asChild:!0,size:"lg",children:(0,r.jsx)(N(),{href:"/login",children:"Iniciar Sesi\xf3n"})})]})})]})})}function ed(){return(0,r.jsx)(en,{})}},9486:(e,a,s)=>{Promise.resolve().then(s.bind(s,8750))}},e=>{var a=a=>e(e.s=a);e.O(0,[111,941,271,53,766,387,299,355,385,859,571,441,684,358],()=>a(9486)),_N_E=e.O()}]);